# ============================================================================
# UBML Strategy Types Schema
# ============================================================================
# Defines strategic elements: value streams, capabilities, products, services.
#
# ============================================================================

$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "https://ubml.talxis.com/schemas/1.4/types/strategy.types.yaml"
title: "UBML Strategy Types"
description: |
  Strategic modeling elements that connect business processes to
  organizational capabilities and value delivery.
  
  This schema defines:
  - Value Streams: End-to-end value creation flows
  - Capabilities: What the organization can do
  - Products: Tangible offerings to customers
  - Services: Intangible offerings to customers
  - Portfolios: Groupings of products/services/capabilities

$defs:

  # ==========================================================================
  # VALUE STREAM
  # ==========================================================================

  ValueStream:
    description: |
      An end-to-end sequence of activities that delivers value to a customer.
      
      Value streams differ from processes:
      - VALUE STREAMS are customer-focused, end-to-end flows
      - PROCESSES are operational, may be internal
      
      A value stream often spans multiple processes and may cross
      organizational boundaries.
      
      EXAMPLES:
      - "Order to Cash" - from order to payment collection
      - "Hire to Retire" - employee lifecycle
      - "Concept to Market" - product development
      - "Issue to Resolution" - customer support
      
      USAGE:
      Value streams provide strategic context for process optimization.
      They help answer "why does this process exist?" and "who cares?"
    type: object
    additionalProperties: false
    required: [name]
    properties:
      name:
        description: |
          Value stream name.
          Often uses "X to Y" naming convention.
        type: string
      
      description:
        description: "Detailed description of the value stream."
        type: string
      
      customer:
        description: |
          The customer or beneficiary of this value stream.
          Can be external customer or internal stakeholder.
        $ref: "../defs/refs.defs.yaml#/$defs/ActorRef"
      
      triggeringEvent:
        description: |
          What triggers/starts this value stream.
          
          Example: "Customer places order", "Employee submits request"
        type: string
      
      endingEvent:
        description: |
          What marks completion of this value stream.
          
          Example: "Payment received", "Issue resolved"
        type: string
      
      stages:
        description: |
          High-level stages of the value stream.
          Each stage may correspond to one or more processes.
        type: array
        items:
          type: object
          additionalProperties: false
          required: [name]
          properties:
            name:
              type: string
            description:
              type: string
            processes:
              type: array
              items:
                $ref: "../defs/refs.defs.yaml#/$defs/ProcessRef"
            
            # Customer journey metadata
            customerTouchpoints:
              description: |
                Customer interaction points in this stage.
                Where and how the customer experiences this part of the journey.
                
                EXAMPLES:
                - "Website product page"
                - "Sales representative call"
                - "Email order confirmation"
                - "Delivery notification SMS"
                - "Customer support chat"
                
                Used for service design and customer experience improvement.
              type: array
              items:
                type: string
            
            customerEmotionalState:
              description: |
                Customer's emotional state during this stage.
                Helps identify moments of delight or frustration.
                
                EXAMPLES:
                - curious (browsing, exploring)
                - anxious (waiting, uncertain)
                - frustrated (problem, delay)
                - delighted (exceeded expectations)
                - confused (unclear process)
                - confident (trust established)
                - relieved (issue resolved)
                
                Used to prioritize service improvements.
              type: string
              examples:
                - curious
                - anxious
                - frustrated
                - delighted
                - confused
                - confident
                - relieved
            
            painPoints:
              description: |
                Customer pain points or frustrations in this stage.
                Service design opportunities.
                
                EXAMPLES:
                - "Unclear pricing on website"
                - "Long wait time for sales callback"
                - "Manual form filling required"
                - "No delivery tracking available"
                
                Each pain point is an improvement opportunity.
              type: array
              items:
                type: string
            
            momentsOfTruth:
              description: |
                Critical moments that shape customer perception.
                Make-or-break touchpoints in this stage.
                
                EXAMPLES:
                - "First pricing quote received"
                - "Product arrives damaged or on time"
                - "Support responds within 5 minutes or 5 hours"
                - "Installation succeeds on first attempt"
                
                Moments of truth require special attention and excellence.
              type: array
              items:
                type: string
            
            customerValue:
              description: |
                Value delivered to customer in this stage.
                What the customer gains or accomplishes.
                
                EXAMPLES:
                - "Customer understands product fit for their needs"
                - "Customer receives accurate delivery estimate"
                - "Customer's issue is resolved permanently"
                - "Customer feels confident in their decision"
                
                Focus on customer outcomes, not internal activities.
              type: string
      
      valueOutcome:
        description: |
          The value delivered at the end of this stream.
          
          Example: "Customer receives working product on time"
        type: string
      
      kpis:
        description: |
          Key Performance Indicators for this value stream.
        type: array
        items:
          $ref: "metrics.types.yaml#/$defs/KPI"
      
      owner:
        description: "Value stream owner/sponsor."
        $ref: "../defs/refs.defs.yaml#/$defs/ActorRef"
      
      tags:
        description: "Tags for filtering and views."
        type: array
        items:
          type: string
      
      custom:
        description: "User-defined custom fields."
        $ref: "../defs/shared.defs.yaml#/$defs/CustomFields"

  # ==========================================================================
  # CAPABILITY
  # ==========================================================================

  Capability:
    description: |
      An organizational capability - what the organization can do.
      
      Capabilities abstract away HOW things are done (processes) to focus
      on WHAT the organization can do. This enables:
      - Strategic planning independent of current implementation
      - Gap analysis and capability development planning
      - Sourcing decisions (build vs. buy vs. outsource)
      
      CAPABILITY vs PROCESS:
      - Capability: "We can fulfill orders" (what)
      - Process: "Order fulfillment process" (how)
      
      Capabilities are typically organized in a hierarchy (capability map).
      
      MATURITY LEVELS:
      1 - Initial: Ad-hoc, inconsistent
      2 - Repeatable: Basic processes in place
      3 - Defined: Standardized, documented
      4 - Managed: Measured, controlled
      5 - Optimizing: Continuously improving
    type: object
    additionalProperties: false
    required: [name]
    properties:
      name:
        description: |
          Capability name.
          Should start with a verb (action-oriented).
          
          Examples:
            - "Manage Customer Relationships"
            - "Process Orders"
            - "Develop Products"
        type: string
      
      description:
        description: "Detailed capability description."
        type: string
      
      level:
        description: |
          Hierarchy level in the capability map.
          1 = Top-level (business area)
          2 = Mid-level (capability group)
          3 = Detailed (specific capability)
        type: integer
        minimum: 1
        maximum: 5
      
      parent:
        description: "Parent capability for hierarchy."
        $ref: "../defs/refs.defs.yaml#/$defs/CapabilityRef"
      
      maturity:
        description: |
          Current maturity level (1-5).
          Based on capability maturity model.
        type: integer
        minimum: 1
        maximum: 5
      
      targetMaturity:
        description: "Target maturity level."
        type: integer
        minimum: 1
        maximum: 5
      
      strategicImportance:
        description: |
          Strategic importance classification:
          - differentiating: Competitive advantage, must excel
          - essential: Must be good, but not differentiating
          - commodity: Table stakes, can be outsourced
        type: string
        enum: [differentiating, essential, commodity]
        x-ubml:
          propertyNames: ["strategicImportance"]
          valueMistakes:
            core:
              value: "core"
              hint: "Use 'differentiating' for core competitive capabilities, or 'essential' for must-have capabilities."
            competitive:
              value: "competitive"
              hint: "Use 'differentiating' for competitive advantage capabilities."
            basic:
              value: "basic"
              hint: "Use 'commodity' for basic, non-differentiating capabilities."
            strategic:
              value: "strategic"
              hint: "Use 'differentiating' for strategic capabilities."
            support:
              value: "support"
              hint: "Use 'essential' or 'commodity' for support capabilities."
      
      processes:
        description: "Processes that implement this capability."
        type: array
        items:
          $ref: "../defs/refs.defs.yaml#/$defs/ProcessRef"
      
      skills:
        description: "Skills required for this capability."
        type: array
        items:
          $ref: "../defs/refs.defs.yaml#/$defs/SkillRef"
      
      systems:
        description: |
          IT systems that enable this capability.
          Free-form list of system names.
        type: array
        items:
          type: string
      
      strategicHorizon:
        description: |
          Strategic time horizon for this capability (BCG Three Horizons framework):
          - h1: Horizon 1 - Core business to maintain and defend (0-1 year)
          - h2: Horizon 2 - Emerging opportunities to invest and grow (1-3 years)
          - h3: Horizon 3 - Future options to explore and experiment (3+ years)
          
          Used for portfolio balancing and investment allocation.
          
          EXAMPLES:
          - h1: "Process customer orders" (core operational capability)
          - h2: "Develop omnichannel customer experience" (growth initiative)
          - h3: "Explore AI-powered personalization" (future option)
        type: string
        enum: [h1, h2, h3]
        x-ubml:
          propertyNames: ["strategicHorizon", "horizon"]
          valueMistakes:
            horizon1:
              value: "horizon1"
              hint: "Use 'h1' for Horizon 1 (core business)."
            horizon2:
              value: "horizon2"
              hint: "Use 'h2' for Horizon 2 (emerging opportunities)."
            horizon3:
              value: "horizon3"
              hint: "Use 'h3' for Horizon 3 (future options)."
            core:
              value: "core"
              hint: "Use 'h1' for core business capabilities."
            future:
              value: "future"
              hint: "Use 'h3' for future/experimental capabilities."
            emerging:
              value: "emerging"
              hint: "Use 'h2' for emerging opportunity capabilities."
      
      owner:
        description: "Capability owner."
        $ref: "../defs/refs.defs.yaml#/$defs/ActorRef"
      
      tags:
        description: "Tags for filtering and views."
        type: array
        items:
          type: string
      
      custom:
        description: "User-defined custom fields."
        $ref: "../defs/shared.defs.yaml#/$defs/CustomFields"

  # ==========================================================================
  # PRODUCT
  # ==========================================================================

  Product:
    description: |
      A product offered by the organization.
      
      Products are tangible offerings that can be:
      - Physical goods (manufactured items)
      - Digital products (software, digital content)
      - Composite products (bundles, kits)
      
      PRODUCT vs SERVICE:
      - Products are tangible, can be inventoried
      - Services are intangible, consumed when delivered
    type: object
    additionalProperties: false
    required: [name]
    properties:
      name:
        description: "Product name."
        type: string
      
      description:
        description: "Product description."
        type: string
      
      sku:
        description: "Stock Keeping Unit or product code."
        type: string
      
      category:
        description: "Product category or type."
        type: string
      
      lifecycle:
        description: |
          Product lifecycle stage.
        type: string
        enum: [concept, development, introduction, growth, maturity, decline, retired]
        x-ubml:
          propertyNames: ["lifecycle"]
          valueMistakes:
            new:
              value: "new"
              hint: "Use 'introduction' for newly launched products."
            eol:
              value: "eol"
              hint: "Use 'retired' for end-of-life products."
            end-of-life:
              value: "end-of-life"
              hint: "Use 'retired' for end-of-life products."
            active:
              value: "active"
              hint: "Use 'growth' or 'maturity' depending on product stage."
            legacy:
              value: "legacy"
              hint: "Use 'decline' or 'retired' for legacy products."
      
      price:
        description: "Base price."
        $ref: "../defs/primitives.defs.yaml#/$defs/Money"
      
      cost:
        description: "Unit cost."
        $ref: "../defs/primitives.defs.yaml#/$defs/Money"
      
      margin:
        description: "Profit margin percentage."
        type: number
        minimum: 0
        maximum: 100
      
      requiredCapabilities:
        description: "Capabilities needed to deliver this product."
        type: array
        items:
          $ref: "../defs/refs.defs.yaml#/$defs/CapabilityRef"
      
      processes:
        description: "Processes involved in delivering this product."
        type: array
        items:
          $ref: "../defs/refs.defs.yaml#/$defs/ProcessRef"
      
      relatedProducts:
        description: "Related or complementary products."
        type: array
        items:
          $ref: "../defs/refs.defs.yaml#/$defs/ProductRef"
      
      strategicHorizon:
        description: |
          Strategic time horizon for this product offering.
          See Capability.strategicHorizon for framework details.
        type: string
        enum: [h1, h2, h3]
      
      portfolioClassification:
        description: |
          BCG Growth-Share Matrix classification for portfolio strategy.
          
          Based on market growth rate (high/low) and relative market share (high/low):
          - star: High growth, high share - Invest heavily to maintain leadership
          - cash-cow: Low growth, high share - Maintain position, harvest cash flow
          - question-mark: High growth, low share - Selective investment or exit
          - dog: Low growth, low share - Harvest or divest
          
          EXAMPLES:
          - star: New cloud platform in growing market with 40% share
          - cash-cow: Mature enterprise software with 60% share, stable market
          - question-mark: IoT sensors in booming market but only 8% share
          - dog: Legacy on-premise tool in declining market with 12% share
        type: string
        enum: [star, cash-cow, question-mark, dog]
        x-ubml:
          propertyNames: ["portfolioClassification", "bcgClassification"]
          valueMistakes:
            "star-product":
              value: "star-product"
              hint: "Use 'star' for high-growth, high-share products."
            "cash cow":
              value: "cash cow"
              hint: "Use 'cash-cow' (hyphenated) for low-growth, high-share products."
            question:
              value: "question"
              hint: "Use 'question-mark' for high-growth, low-share products."
            "problem-child":
              value: "problem-child"
              hint: "Use 'question-mark' - this is the modern BCG term for this quadrant."
            "problem child":
              value: "problem child"
              hint: "Use 'question-mark' - this is the modern BCG term for this quadrant."
      
      marketGrowthRate:
        description: |
          Market growth rate classification for BCG matrix positioning.
          Typically >10% annual growth is 'high', <10% is 'low', but varies by industry.
        type: string
        enum: [high, low]
      
      relativeMarketShare:
        description: |
          Relative market share (vs. largest competitor) for BCG matrix positioning.
          >1.0 is 'high' (market leader), <1.0 is 'low' (follower).
        type: string
        enum: [high, low]
      
      strategicAction:
        description: |
          Recommended strategic action based on portfolio position.
          - invest: Grow aggressively (typical for stars, selective question-marks)
          - maintain: Defend position (typical for cash-cows)
          - harvest: Maximize short-term cash flow (aging cash-cows, dogs)
          - divest: Exit the business (dogs with no turnaround potential)
          
          DECISION GUIDE:
          - Stars → invest (build future cash cows)
          - Cash cows → maintain (fund stars and question-marks)
          - Question marks → invest (if winnable) or divest (if not)
          - Dogs → harvest or divest (free up resources)
        type: string
        enum: [invest, maintain, harvest, divest]
        x-ubml:
          propertyNames: ["strategicAction", "action"]
          valueMistakes:
            grow:
              value: "grow"
              hint: "Use 'invest' for growth strategy."
            hold:
              value: "hold"
              hint: "Use 'maintain' to defend current position."
            exit:
              value: "exit"
              hint: "Use 'divest' for exit strategy."
            keep:
              value: "keep"
              hint: "Use 'maintain' to keep current position."
      
      owner:
        description: "Product owner/manager."
        $ref: "../defs/refs.defs.yaml#/$defs/ActorRef"
      
      tags:
        description: "Tags for filtering and views."
        type: array
        items:
          type: string
      
      custom:
        description: "User-defined custom fields."
        $ref: "../defs/shared.defs.yaml#/$defs/CustomFields"

  # ==========================================================================
  # SERVICE
  # ==========================================================================

  Service:
    description: |
      A service offered by the organization.
      
      Services are intangible offerings characterized by:
      - Consumed when delivered (no inventory)
      - Often involve customer interaction
      - Quality depends on delivery
      
      EXAMPLES:
      - Consulting, training, support
      - Maintenance, repair, installation
      - Subscription services
    type: object
    additionalProperties: false
    required: [name]
    properties:
      name:
        description: "Service name."
        type: string
      
      description:
        description: "Service description."
        type: string
      
      type:
        description: |
          Service type classification.
        type: string
        examples:
          - professional
          - managed
          - support
          - subscription
          - on-demand
      
      deliveryModel:
        description: |
          How the service is delivered.
          
          Examples: "on-site", "remote", "hybrid", "self-service"
        type: string
      
      sla:
        description: |
          Service Level Agreement summary.
          
          Example: "4-hour response, 99.9% uptime"
        type: string
      
      pricing:
        description: |
          Pricing model.
          
          Example: "hourly", "fixed", "subscription", "outcome-based"
        type: string
      
      basePrice:
        description: "Base price for the service."
        $ref: "../defs/primitives.defs.yaml#/$defs/Money"
      
      requiredCapabilities:
        description: "Capabilities needed to deliver this service."
        type: array
        items:
          $ref: "../defs/refs.defs.yaml#/$defs/CapabilityRef"
      
      processes:
        description: "Processes involved in delivering this service."
        type: array
        items:
          $ref: "../defs/refs.defs.yaml#/$defs/ProcessRef"
      
      relatedServices:
        description: "Related or bundled services."
        type: array
        items:
          $ref: "../defs/refs.defs.yaml#/$defs/ServiceRef"
      
      strategicHorizon:
        description: |
          Strategic time horizon for this service offering.
          See Capability.strategicHorizon for framework details.
        type: string
        enum: [h1, h2, h3]
      
      portfolioClassification:
        description: |
          BCG Growth-Share Matrix classification for portfolio strategy.
          See Product.portfolioClassification for framework details.
        type: string
        enum: [star, cash-cow, question-mark, dog]
        x-ubml:
          propertyNames: ["portfolioClassification", "bcgClassification"]
          valueMistakes:
            "star-product":
              value: "star-product"
              hint: "Use 'star' for high-growth, high-share services."
            "cash cow":
              value: "cash cow"
              hint: "Use 'cash-cow' (hyphenated) for low-growth, high-share services."
            question:
              value: "question"
              hint: "Use 'question-mark' for high-growth, low-share services."
            "problem-child":
              value: "problem-child"
              hint: "Use 'question-mark' - this is the modern BCG term for this quadrant."
      
      marketGrowthRate:
        description: |
          Market growth rate classification for BCG matrix positioning.
          See Product.marketGrowthRate for details.
        type: string
        enum: [high, low]
      
      relativeMarketShare:
        description: |
          Relative market share (vs. largest competitor) for BCG matrix positioning.
          See Product.relativeMarketShare for details.
        type: string
        enum: [high, low]
      
      strategicAction:
        description: |
          Recommended strategic action based on portfolio position.
          See Product.strategicAction for framework details.
        type: string
        enum: [invest, maintain, harvest, divest]
        x-ubml:
          propertyNames: ["strategicAction", "action"]
          valueMistakes:
            grow:
              value: "grow"
              hint: "Use 'invest' for growth strategy."
            hold:
              value: "hold"
              hint: "Use 'maintain' to defend current position."
            exit:
              value: "exit"
              hint: "Use 'divest' for exit strategy."
      
      owner:
        description: "Service owner/manager."
        $ref: "../defs/refs.defs.yaml#/$defs/ActorRef"
      
      tags:
        description: "Tags for filtering and views."
        type: array
        items:
          type: string
      
      custom:
        description: "User-defined custom fields."
        $ref: "../defs/shared.defs.yaml#/$defs/CustomFields"

  # ==========================================================================
  # PORTFOLIO
  # ==========================================================================

  Portfolio:
    description: |
      A grouping of products, services, or capabilities.
      
      Portfolios enable:
      - Strategic grouping and management
      - Investment prioritization
      - Lifecycle management across offerings
      
      PORTFOLIO TYPES:
      - product: Product portfolio
      - service: Service portfolio
      - capability: Capability portfolio
      - project: Project portfolio
    type: object
    additionalProperties: false
    required: [name, type]
    properties:
      name:
        description: "Portfolio name."
        type: string
      
      description:
        description: "Portfolio description."
        type: string
      
      type:
        description: "Portfolio type classification."
        type: string
        enum: [product, service, capability, project]
      
      products:
        description: "Products in this portfolio (for type: product)."
        type: array
        items:
          $ref: "../defs/refs.defs.yaml#/$defs/ProductRef"
      
      services:
        description: "Services in this portfolio (for type: service)."
        type: array
        items:
          $ref: "../defs/refs.defs.yaml#/$defs/ServiceRef"
      
      capabilities:
        description: "Capabilities in this portfolio (for type: capability)."
        type: array
        items:
          $ref: "../defs/refs.defs.yaml#/$defs/CapabilityRef"
      
      strategy:
        description: |
          Portfolio strategy description.
          
          Example: "Focus on high-margin enterprise products"
        type: string
      
      investmentBudget:
        description: "Total investment budget for this portfolio."
        $ref: "../defs/primitives.defs.yaml#/$defs/Money"
      
      owner:
        description: "Portfolio owner/manager."
        $ref: "../defs/refs.defs.yaml#/$defs/ActorRef"
      
      tags:
        description: "Tags for filtering and views."
        type: array
        items:
          type: string
      
      custom:
        description: "User-defined custom fields."
        $ref: "../defs/shared.defs.yaml#/$defs/CustomFields"
